{% extends 'base.html' %}
{% block title %} PIZZA {% endblock %}
{% block content %}
<div class="container">
    <section class="carousel">
        <div class="container-fluid">
            <!-- carousel -->
            {% if errorCheck != 1 %}
                <div id="carouselExampleControls" class="carousel slide" data-bs-ride-ride="carousel" data-ride="carousel" data-pause="hover">
                      <div class="carousel-inner" style="border-radius: 2px; height: 300px">
                            <div class="carousel-item active">
                                {% for product in product_list %}
                                {% if product.id == random_f %}
                                    <img src="{{ product.image.url }}" class="d-block w-100" style="height: 600px" alt="pizza" >
                                    <div class="carousel-caption d-none d-md-block" style="background: rgba(0,0,0,.4); position: absolute; top: 31%;">
                                        <h5>{{ product.name }}</h5>
                                        <p>{{ product.description }}</p>
                                    </div>
                                {% endif %}
                                {% endfor %}
                            </div>
                            <div class="carousel-item">
                                {% for product in product_list %}
                                {% if product.id == random_s %}
                                    <img src="{{ product.image.url }}" class="d-block w-100" style="height: 600px" alt="pizza">
                                    <div class="carousel-caption d-none d-md-block" style="background: rgba(0,0,0,.4); position: absolute; top: 31%;">
                                        <h5> {{ product.name }}</h5>
                                        <p>{{ product.description }}</p>
                                    </div>
                                {% endif %}
                                {% endfor %}
                            </div>
                            <div class="carousel-item">
                                {% for product in product_list %}
                                {% if product.id == random_t %}
                                    <img src="{{ product.image.url }}" class="d-block w-100" style="height: 600px" alt="pizza">
                                    <div class="carousel-caption d-none d-md-block" style="background: rgba(0,0,0,.4); position: absolute; top: 31%;">
                                        <h5>{{ product.name }}</h5>
                                        <p>{{ product.description }}</p>
                                    </div>
                                {% endif %}
                                {% endfor %}
                            </div>

                      </div>
                      <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden"></span>
                      </a>
                      <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden"></span>
                      </a>
                </div>
            {% endif %}
            {% if errorCheck == 1 %}
                <h3 style="text-align: center">Ошибка. Недостаточно продуктов.</h3>
            {% endif %}
            <!-- carouselEND -->
        </div>
    </section>
    <hr width="97%" color="#ffc107" size="5">
    <section class="products">
        <div class="container-fluid">
            <div class="row" style="margin-left: 0px; margin-right: 0px;">
                {% for product in product_list %}
                <div class="col-md-4">
                    <div class="card" style="width: 19rem; margin: 10px; height: 410px; border: 0px;">
                        <img class="card-img-top" data-toggle="modal" data-target="#ModalCenter{{product.pk}}" src="{{ product.image.url }}" style="height:180px">
                        <!-- Всплывающее окно с товаром -->
                        <div class="modal fade" id="ModalCenter{{product.pk}}"  tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered"  role="document">
                                   <div class="card float-right" style="border: 0px;">
                                          <div class="row" padding>
                                            <div class="col-sm-5">
                                              <img class="d-block" style="width: 515px" src="{{ product.image.url }}" alt="">
                                            </div>
                                            <div class="col-sm-7" style="background-color: rgba(255, 255, 255, 0.2); backdrop-filter: blur(20px);">
                                              <div class="card-block" style="margin-top: 25px;">
                                                <h3 style="color: white" class="card-title"> {{product.name}} </h3>
                                                <p style="color: white">{{product.description}}</p>
                                                <p style="color: white">{{product.weight}} грамм &middot {{product.cm}} см</p>
                                                <br>
                                                  <!-- тут кнопку -->
                                              </div>
                                            </div>

                                          </div>
                                        </div>
                                      </div>
                        </div>
                        <!-- Конец окна с товаром -->
                        <div class="card-body" style="padding: 0px;" >
                            <h5 class="card-title" style="height: 24px; margin-top: 10px">{{ product.name }}</h5>
                            <p class="card-text" style="height: 96px">{{ product.description }}</p>
                            <footer class="row" style="display: flex; margin-right: 0px; margin-left: 0px; align-items: center; justify-content: center;">
                                <div class="product-price" style="flex: 1 1 auto;">{{ product.price }} ₽</div>
                                <button href="" class="btn btn-primary ml-2" style="
                                                                                    line-height: 27px;
                                                                                    align-items: center;
                                                                                    justify-content: center;
                                                                                    border-radius: 25px;
                                                                                    background-color: #ffc107;
                                                                                    border: 0px;
                                                                                    color: black;
                                                                                    width:auto;" >В корзину</button>
                                <a href="{% url 'product_edit' product.pk %}" class="btn btn-primary ml-2" style="
                                                                                    line-height: 27px;
                                                                                    align-items: center;
                                                                                    justify-content: center;
                                                                                    border-radius: 25px;
                                                                                    background-color: #ffc107;
                                                                                    border: 0px;
                                                                                    color: black;
                                                                                    width:auto;" >Изменить</a>

                                <a href="#" class="ml-2" data-toggle="modal" data-target="#exampleModalCenter{{product.pk}}" style="color: red">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
                                        <path fill-rule="evenodd" d="M13.854 2.146a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.708l11-11a.5.5 0 0 1 .708 0Z"/>
                                        <path fill-rule="evenodd" d="M2.146 2.146a.5.5 0 0 0 0 .708l11 11a.5.5 0 0 0 .708-.708l-11-11a.5.5 0 0 0-.708 0Z"/>
                                    </svg>
                                </a>
                                <div class="modal fade" id="exampleModalCenter{{product.pk}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                                      <div class="modal-dialog modal-dialog-centered" role="document">
                                            <div class="modal-content">
                                                  <div class="modal-header">
                                                        <h5 class="modal-title" id="exampleModalLongTitle">Удаление объекта</h5>
                                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                            <span aria-hidden="true">&times;</span>
                                                        </button>
                                                  </div>
                                                  <div class="modal-body">
                                                        Вы уверены, что хотите удалить объект?
                                                  </div>
                                                  <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Нет</button>
                                                        <a type="submit" href="{% url 'product_delete' product.pk %}" class="btn btn-primary">Да</a>
                                                  </div>
                                            </div>
                                      </div>
                                </div>

                            </footer>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>
    <hr width="97%" color="#ffc107" size="5">
</div>
{% endblock content %}
